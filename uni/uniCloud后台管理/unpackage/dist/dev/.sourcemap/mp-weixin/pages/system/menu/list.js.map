{"version":3,"sources":["uni-app:///main.js","webpack:///E:/vue/uni/uniCloud后台管理/pages/system/menu/list.vue?2618","webpack:///E:/vue/uni/uniCloud后台管理/pages/system/menu/list.vue?9147","webpack:///E:/vue/uni/uniCloud后台管理/pages/system/menu/list.vue?374d","webpack:///E:/vue/uni/uniCloud后台管理/pages/system/menu/list.vue?e4f2","uni-app:///pages/system/menu/list.vue","webpack:///E:/vue/uni/uniCloud后台管理/pages/system/menu/list.vue?2399","webpack:///E:/vue/uni/uniCloud后台管理/pages/system/menu/list.vue?90be"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,gG;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AACoM;AACpM,gBAAgB,6MAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,8LAEN;AACL,GAAG;AACH;AACA,WAAW,8LAEN;AACL,GAAG;AACH;AACA,WAAW,4KAEN;AACL,GAAG;AACH;AACA,WAAW,4KAEN;AACL,GAAG;AACH;AACA,WAAW,4KAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAAyvB,CAAgB,8wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmF7wB;AACA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA,KAHA;AAIA,GANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;AAEA;AACA,MADA,kBACA;AACA;AACA,mBADA;AAEA,eAFA;AAGA,gBAHA;AAIA,yBAJA;AAKA,kCALA;;AAOA,GATA;AAUA;AACA,eADA,yBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AACA,KAjBA,EAVA;;AA6BA;AACA,eADA,uBACA,GADA,EACA;AACA;AACA;AACA;AACA,KALA,EA7BA;;AAoCA,QApCA,oBAoCA;AACA;AACA,GAtCA;AAuCA;AACA,aADA,qBACA,GADA,EACA;AACA;AACA,KAHA;AAIA,YAJA,sBAIA;AACA;AACA;AACA,wBADA;AAEA,UAFA,CAEA;AACA;AACA,OAJA,EAIA,KAJA,CAIA;AACA;AACA,OANA,EAMA,OANA,CAMA;AACA;AACA,OARA;AASA,KAfA;AAgBA,cAhBA,sBAgBA,GAhBA,EAgBA;AACA;AACA,gBADA;AAEA;AACA;AACA;AACA,WAHA,EAFA;;;AAQA,KAzBA;AA0BA,iBA1BA,yBA0BA,IA1BA,EA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBADA;AAEA,wBAFA;AAGA;AACA;AACA;AACA;AACA;AACA,sBADA;;AAGA;AACA,wBADA;AAEA,cAFA,CAEA;AACA;AACA,WAJA,EAIA,OAJA,CAIA;AACA;AACA,WANA;AAOA,SAjBA;;AAmBA,KAnDA;AAoDA,0BApDA,kCAoDA,CApDA,EAoDA;AACA;AACA,KAtDA;AAuDA,kBAvDA,0BAuDA,cAvDA,EAuDA;AACA;AACA;AACA,qBADA;AAEA,+BAFA;AAGA,2BAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OARA;AASA;AACA,mBADA;AAEA,iCAFA;AAGA;AACA;AACA;AACA;AACA;AACA,sBADA;;AAGA;AACA;AACA;AACA,yBADA;AAEA,gCAFA;AAGA,+BAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,eAVA;;AAYA,WAbA,EAaA,KAbA,CAaA;AACA;AACA,yBADA;AAEA,kCAFA;AAGA,+BAHA;;AAKA,WAnBA,EAmBA,OAnBA,CAmBA;AACA;AACA,WArBA;AAsBA,SAjCA;;AAmCA,KA7GA,EAvCA,E;;;;;;;;;;;;;AC9HA;AAAA;AAAA;AAAA;AAAykC,CAAgB,mkCAAG,EAAC,C;;;;;;;;;;;ACA7lC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/system/menu/list.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/system/menu/list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./list.vue?vue&type=template&id=5890e632&\"\nvar renderjs\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/system/menu/list.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=template&id=5890e632&\"","var components = {\n  uniBadge: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-badge/uni-badge\" */ \"@/components/uni-badge/uni-badge.vue\"\n    )\n  },\n  uniTable: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-table/uni-table\" */ \"@/components/uni-table/uni-table.vue\"\n    )\n  },\n  uniTr: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-tr/uni-tr\" */ \"@/components/uni-tr/uni-tr.vue\"\n    )\n  },\n  uniTh: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-th/uni-th\" */ \"@/components/uni-th/uni-th.vue\"\n    )\n  },\n  uniTd: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-td/uni-td\" */ \"@/components/uni-td/uni-td.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"uni-tabs__header\">\r\n\t\t\t<view class=\"uni-tabs__nav-wrap\">\r\n\t\t\t\t<view class=\"uni-tabs__nav-scroll\">\r\n\t\t\t\t\t<view class=\"uni-tabs__nav\">\r\n\t\t\t\t\t\t<view @click=\"switchTab('menus')\" :class=\"{'is-active':currentTab==='menus'}\" class=\"uni-tabs__item\">\r\n\t\t\t\t\t\t\t菜单管理\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view @click=\"switchTab('pluginMenus')\" v-if=\"pluginMenus.length\" :class=\"{'is-active':currentTab==='pluginMenus'}\"\r\n\t\t\t\t\t\t class=\"uni-tabs__item\">\r\n\t\t\t\t\t\t\t待添加菜单\r\n\t\t\t\t\t\t\t<uni-badge class=\"menu-badge\" :text=\"pluginMenus.length\" type=\"error\"></uni-badge>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-show=\"currentTab==='menus'\">\r\n\t\t\t<view class=\"uni-header\" style=\"border-bottom: 0;margin-bottom: -15px;\">\r\n\t\t\t\t<view class=\"uni-group\">\r\n\t\t\t\t\t<button @click=\"navigateTo('./add')\" size=\"mini\" type=\"primary\">新增</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"uni-group\">\r\n\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-container\">\r\n\t\t\t\t<uni-table :loading=\"loading\" :emptyText=\"errMsg || '没有更多数据'\" border stripe>\r\n\t\t\t\t\t<uni-tr>\r\n\t\t\t\t\t\t<uni-th width=\"80\" align=\"center\">排序</uni-th>\r\n\t\t\t\t\t\t<uni-th width=\"200\" align=\"center\">名称</uni-th>\r\n\t\t\t\t\t\t<uni-th width=\"200\" align=\"center\">标识</uni-th>\r\n\t\t\t\t\t\t<uni-th align=\"center\">URL</uni-th>\r\n\t\t\t\t\t\t<uni-th width=\"80\" align=\"center\">是否启用</uni-th>\r\n\t\t\t\t\t\t<uni-th width=\"160\" align=\"center\">操作</uni-th>\r\n\t\t\t\t\t</uni-tr>\r\n\t\t\t\t\t<uni-tr v-for=\"(item,index) in menus\" :key=\"index\">\r\n\t\t\t\t\t\t<uni-td align=\"center\">{{item.sort}}</uni-td>\r\n\t\t\t\t\t\t<uni-td>{{item.title}}</uni-td>\r\n\t\t\t\t\t\t<uni-td>{{item.menu_id}}</uni-td>\r\n\t\t\t\t\t\t<uni-td>{{item.url}}</uni-td>\r\n\t\t\t\t\t\t<uni-td align=\"center\" :class=\"{'menu-disable':!item.enable}\">{{item.enable?'已启用':'未启用'}}</uni-td>\r\n\t\t\t\t\t\t<uni-td align=\"center\">\r\n\t\t\t\t\t\t\t<view class=\"uni-group\">\r\n\t\t\t\t\t\t\t\t<button @click=\"navigateTo('./edit?id='+item._id)\" class=\"uni-button\" size=\"mini\" type=\"primary\">修改</button>\r\n\t\t\t\t\t\t\t\t<button :style=\"{visibility:item.menu_id==='system_menu'||item.menu_id==='system_management'?'hidden':'initial'}\"\r\n\t\t\t\t\t\t\t\t @click=\"confirmDelete(item)\" class=\"uni-button\" size=\"mini\" type=\"warn\">删除</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</uni-td>\r\n\t\t\t\t\t</uni-tr>\r\n\t\t\t\t</uni-table>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-show=\"currentTab==='pluginMenus'\">\r\n\t\t\t<view class=\"uni-header\" style=\"border-bottom: 0;margin-bottom: -15px;\">\r\n\t\t\t\t<view class=\"uni-group\">\r\n\t\t\t\t\t<button style=\"width: 130px;\" @click=\"addPluginMenus\" size=\"mini\" type=\"primary\">添加选中的菜单</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"uni-group\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-container\">\r\n\t\t\t\t<uni-table ref=\"pluginMenusTable\" type=\"selection\" border stripe @selection-change=\"pluginMenuSelectChange\">\r\n\t\t\t\t\t<uni-tr>\r\n\t\t\t\t\t\t<uni-th align=\"center\">名称（标识）</uni-th>\r\n\t\t\t\t\t\t<uni-th align=\"center\">URL</uni-th>\r\n\t\t\t\t\t\t<uni-th align=\"center\">插件菜单 json 文件</uni-th>\r\n\t\t\t\t\t</uni-tr>\r\n\t\t\t\t\t<uni-tr v-for=\"(item,index) in pluginMenus\" :key=\"index\">\r\n\t\t\t\t\t\t<uni-td>{{item.name}}（{{item.menu_id}}）</uni-td>\r\n\t\t\t\t\t\t<uni-td>{{item.url}}</uni-td>\r\n\t\t\t\t\t\t<uni-td>{{item.json}}</uni-td>\r\n\t\t\t\t\t</uni-tr>\r\n\t\t\t\t</uni-table>\r\n\t\t\t\t<view class=\"uni-sub-title\" style=\"margin-top: 15px;\">\r\n\t\t\t\t\t以上待添加菜单来自于三方插件，添加后，将显示在菜单管理中，若不希望显示在上述表格中时，可手动删除项目中对应的`插件id-menu.json`文件。\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// 查找插件注册的菜单列表（目前仅在开发模式启用，仅限 admin 角色）\r\n\tconst pluginMenuJsons = []\r\n\tif (process.env.NODE_ENV === 'development') {\r\n\t\tconst rootModules = require.context(\r\n\t\t\t'../../../',\r\n\t\t\tfalse,\r\n\t\t\t/-menu.json$/\r\n\t\t)\r\n\t\trootModules.keys().forEach(function(key) {\r\n\t\t\tconst json = key.substr(2)\r\n\t\t\trootModules(key).forEach(item => {\r\n\t\t\t\titem.json = json\r\n\t\t\t\tpluginMenuJsons.push(item)\r\n\t\t\t})\r\n\t\t})\r\n\t\t// const pluginModules = require.context(\r\n\t\t// \t'../../../uni_modules/',\r\n\t\t// \ttrue,\r\n\t\t// \t/-menu.json$/\r\n\t\t// )\r\n\t\t// pluginModules.keys().forEach(function(key) {\r\n\t\t// \tconst json = 'uni_modules' + key.substr(1)\r\n\t\t// \tpluginModules(key).forEach(item => {\r\n\t\t// \t\titem.json = json\r\n\t\t// \t\tpluginMenuJsons.push(item)\r\n\t\t// \t})\r\n\t\t// })\r\n\t}\r\n\r\n\t// 菜单扁平化\r\n\tfunction flatMenu(menu, result, depth = 0) {\r\n\t\tmenu.title = (depth ? '　'.repeat(depth) + '|-' : '') + menu.name\r\n\t\tresult.push(menu)\r\n\t\tif (menu.children) {\r\n\t\t\tflatMenus(menu.children, result, depth + 1)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction flatMenus(menus, result = [], depth = 0) {\r\n\t\tmenus.forEach(menu => flatMenu(menu, result, depth))\r\n\t\treturn result\r\n\t}\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tloading: true,\r\n\t\t\t\tmenus: [],\r\n\t\t\t\terrMsg: '',\r\n\t\t\t\tcurrentTab: 'menus',\r\n\t\t\t\tselectedPluginMenuIndexs: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tpluginMenus() {\r\n\t\t\t\tconst menus = []\r\n\t\t\t\tif (!this.$hasRole('admin')) {\r\n\t\t\t\t\treturn menus\r\n\t\t\t\t}\r\n\t\t\t\tconst dbMenus = this.menus\r\n\t\t\t\tif (!dbMenus.length) {\r\n\t\t\t\t\treturn menus\r\n\t\t\t\t}\r\n\t\t\t\tpluginMenuJsons.forEach(menu => {\r\n\t\t\t\t\t// 查找尚未被注册到数据库中的菜单\r\n\t\t\t\t\tif (!dbMenus.find(item => item.menu_id === menu.menu_id)) {\r\n\t\t\t\t\t\tmenus.push(menu)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn menus\r\n\t\t\t},\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tpluginMenus(val) {\r\n\t\t\t\tif (!val.length) {\r\n\t\t\t\t\tthis.currentTab = 'menus'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tswitchTab(tab) {\r\n\t\t\t\tthis.currentTab = tab\r\n\t\t\t},\r\n\t\t\tloadData() {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tthis.$request('system/menu/list', {}, {\r\n\t\t\t\t\tshowModal: false\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.menus = flatMenus(res)\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tthis.errMsg = err.message\r\n\t\t\t\t}).finally(() => {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tnavigateTo(url) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tevents: {\r\n\t\t\t\t\t\trefreshData: () => {\r\n\t\t\t\t\t\t\tthis.loadData()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tconfirmDelete(menu) {\r\n\t\t\t\tlet content = '是否删除该菜单？'\r\n\t\t\t\t// 有子菜单\r\n\t\t\t\tif (this.menus.find(item => item.parent_id === menu.menu_id)) {\r\n\t\t\t\t\tcontent = '是否删除该菜单及其所有子菜单？'\r\n\t\t\t\t}\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (!res.confirm) {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.$request('system/menu/delete', {\r\n\t\t\t\t\t\t\tid: menu._id\r\n\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\tthis.loadData()\r\n\t\t\t\t\t\t}).finally(() => {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpluginMenuSelectChange(e) {\r\n\t\t\t\tthis.selectedPluginMenuIndexs = e.detail.index\r\n\t\t\t},\r\n\t\t\taddPluginMenus(confirmContent) {\r\n\t\t\t\tif (!this.selectedPluginMenuIndexs.length) {\r\n\t\t\t\t\treturn uni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: '请选择要添加的菜单！',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tconst pluginMenus = this.pluginMenus\r\n\t\t\t\tconst menus = []\r\n\t\t\t\tthis.selectedPluginMenuIndexs.forEach(i => {\r\n\t\t\t\t\tconst menu = pluginMenus[i]\r\n\t\t\t\t\tif (menu) {\r\n\t\t\t\t\t\t// 拷贝一份，移除 json 字段\r\n\t\t\t\t\t\tconst dbMenu = JSON.parse(JSON.stringify(menu))\r\n\t\t\t\t\t\tdelete dbMenu.json\r\n\t\t\t\t\t\tmenus.push(dbMenu)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '您确认要添加已选中的菜单吗？',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (!res.confirm) {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconst checkAll = menus.length === pluginMenus.length\r\n\t\t\t\t\t\tuniCloud.database().collection('opendb-admin-menus').add(menus).then(res => {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: '添加菜单成功！',\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\t\tthis.$refs.pluginMenusTable.clearSelection()\r\n\t\t\t\t\t\t\t\t\tif (checkAll) {\r\n\t\t\t\t\t\t\t\t\t\tthis.currentTab = 'menus'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.loadData()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: err.message,\r\n\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}).finally(() => {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style>\r\n\t.menu-disable {\r\n\t\tcolor: red;\r\n\t}\r\n\r\n\t.menu-badge {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tright: 5px;\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1605627329476\n      var cssReload = require(\"D:/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}